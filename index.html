<!DOCTYPE html>
<html>
 
<head>
  <meta charset="utf-8">
  <title></title>
  <style>
	

body{
  font-size:26px;

  font-family: 'Avenir', sans-serif;
  background:white;
  width: 98%;
  margin: 0 auto;
}
h1{text-align: center;}
tspan{
  font-size:.4em;
 }

#box1,#box2
{
  margin: 0 auto;
   position: relative;
   background-color:#313946; 
   width:98% ;
   height:325px;
   display: flex;
   justify-content: space-between;
  
  box-shadow: 2px 7px 50px 0px #313946;
  border-radius: 5px;
  padding-top: 20px;
  padding-bottom: 20px;
}

#gg,#gg4,#gg7{
  

  margin-left: 0;
  width:300px;
  height:300px;
  

}
#gg2,#gg5{

  

  width:300px;
  height:300px;

  text-align: center; 
}

#gg3,#gg6{
 
   

 margin-right:0%;
  width:300px;
  height:300px;
 
}

.dial{
   fill:transparent;
  stroke-linecap:"round";
  stroke-dasharray:.16em,.27em;
  r:5em; 
}

#dial_bg{
  stroke:green;
  stroke-width:.8em;
}
#dial{
  stroke-width:2em; 
}

#point,#point2,#point3,#point4,#point5,#point6,#point7{
  fill:cyan;
  r: .25em;

}

#limite,
#limite2,
#limite3,#limite4,
#limite5,
#limite6,#limite7{
  fill:orange;
  r: .25em;

}





#needles{
  transform: translateY(-.5em);
  r: 1.8em;

}
.smooth{
  transition: all .5s linear
 /*transition:  all 1s cubic-bezier(0.01,0.02,0.4,  1);
 */
}
#valtext,#valtext2,#valtext3,#valtext4,#valtext5,#valtext6,#valtext7{

  font-size:2.5em;
  font-weight:200;
  fill:white;
}


#lbltext,#lbltext3,#lbltext2,#lbltext4,#lbltext5,#lbltext6,#lbltext7{
  font-family:'Lato';
  font-size:2em;
  font-weight:300;
  fill:white;
  
}




  </style>
</head>
 
<div>
  <h1> Smart Energy Dashboard</h1>
  <small style=" font-size: 1.8em; padding: 10px;">Voltage(W)</small>
<div id='box1'>
  <svg id="gg">
  <g id="g1"></g>
    <g id="g2">
       <text id="valtext" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
      
     <text id="lbltext" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
    <circle id ="limite" cx="50%" cy="50%" />
  
    
  <circle id ="point" class="" cx="50%" cy="50%" />
    <text id="limitText" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
    
    </g>  
  
  </svg>
 
  <div id="gauge2" class="gauge-container">
    <svg id="gg2">
      <g id="g1-2"></g>
      <g id="g2-2">
        <text id="valtext2" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
        <text id="lbltext2" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
        <circle id="limite2" cx="50%" cy="50%" />
        <circle id="point2" cx="50%" cy="50%" />
        <text id="limitText2" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
      </g>
    </svg>
  </div>


  <div id="gauge3" class="gauge-container">
    <svg id="gg3">
      <g id="g1-3"></g>
      <g id="g3-3">
        <text id="valtext3" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
        <text id="lbltext3" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
        <circle id="limite3" cx="50%" cy="50%" />
        <circle id="point3" cx="50%" cy="50%" />
        <text id="limitText3" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
      </g>
    </svg>
  </div>
  <p style="color: wheat; margin-top:30%;left:10%; position: absolute;">Phase 01</p>
  <p style="color: wheat; margin-top:30%;right:10%; position: absolute;">Phase 02</p>
  <p style="color: wheat; margin-top:30%;right:46%; position: absolute;">Phase 03</p>

</div><br>
<small style=" font-size: 1.8em; padding: 10px; top: 50px;" >Currunt</small>
</div>
<div id='box2'>
  <svg id="gg4">
  <g id="g1-4"></g>
    <g id="g4-4">
       <text id="valtext4" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
      
     <text id="lbltext4" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
    <circle id ="limite4" cx="50%" cy="50%" />
  
    
  <circle id ="point4" class="" cx="50%" cy="50%" />
    <text id="limitText4" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
  
    </g>  
  </svg>
  
  <div id="gauge5" class="gauge-container">
    <svg id="gg5">
      <g id="g1-5"></g>
      <g id="g5-5">
        <text id="valtext5" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
        <text id="lbltext5" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
        <circle id="limite5" cx="50%" cy="50%" />
        <circle id="point5" cx="50%" cy="50%" />
        <text id="limitText5" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
      </g>
    </svg>
  </div>


  <div id="gauge6" class="gauge-container">
    <svg id="gg6">
      <g id="g1-6"></g>
      <g id="g6-6">
        <text id="valtext6" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
        <text id="lbltext6" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
        <circle id="limite6" cx="50%" cy="50%" />
        <circle id="point6" cx="50%" cy="50%" />
        <text id="limitText6" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
      </g>
    </svg>
  </div>

  <p style="color: wheat; margin-top:31%;left:10%; position: absolute;">Phase 01</p>
  <p style="color: wheat; margin-top:31%;right:10%; position: absolute;">Phase 02</p>
  <p style="color: wheat; margin-top:31%;right:45%; position: absolute;">Phase 03</p>

</div>
<br>  <small style=" font-size: 1.8em; padding: 10px;">Power()</small>

<div id="box1">
<div id="gauge7" class="gauge-container">
  <svg id="gg7">
    <g id="g1-7"></g>
    <g id="g7-7">
      <text id="valtext7" class="smooth" x="50%" y="55%" text-anchor="middle" alignment-baseline="bottom"></text>
      <text id="lbltext7" x="50%" y="63%" text-anchor="middle" alignment-baseline="central"></text>
      <circle id="limite7" cx="50%" cy="50%" />
      <circle id="point7" cx="50%" cy="50%" />
      <text id="limitText7" x="50%" y="50%" text-anchor="middle" alignment-baseline="central"></text>
    </g>
  </svg>
</div>
</div>
  <script>
   
function  addPath(gr,sx,sy,ex,ey,g)

{
  
  
  newpath = document.createElementNS('http://www.w3.org/2000/svg',"path"); 
  
  sx+=150;
  sy+=150;
  ex+=150;
  ey+=150;
 // stroke=color_value;
newpath.setAttributeNS(null, "id", "pathIdD");  
newpath.setAttributeNS(null, "d", "M "+sx+" "+sy+" L "+ex+" "+ey);  
newpath.setAttributeNS(null, "stroke", eval(g.color)); 
newpath.setAttributeNS(null, "stroke-width", eval(g.lineWidth));  
newpath.setAttributeNS(null, "opacity", 1);  
newpath.setAttributeNS(null, "fill", "none");

document.getElementById(gr).appendChild(newpath);


}

var gauge =[
      {
        ////////  KM/H  /////////
        radius:26.5,//radio del medidor
        angle:270,// angulo total del medidor
        start:155,// angulo de inicio del medidor
        divs:50,// divisiones
        value:467.09,// valor inicial
        limit:350,// valor del limite (escala secundaria)
        min:0,// valor mínimo del medidor
        max:500,// valor máximo (fondo de escala) 
        color:"'cyan'",// color del medidor(eval);"'cyan'"
        alertColor:"'red'",// color del medidor(eval);
        limitColor:"'orange'",// color del medidor(eval);
        units:"'W'",// leyenda abajo del valor (eval)
        lineWidth:'pos/8',// ancho del segmento
        lineSize:6,// largo del segmento
        lineOffset:0,
        needleStart:0,
        needleEnd:-7,
        pointPos: -4,
        refresh:10,
        pointColor:"'green'",

        scale:{
          lineWidth:'pos/8',
          lineSize:2,
          color:"'white'",
          lineOffset:0,

        },

        scaleOver:{
          lineWidth:'pos/8',
          lineSize:6,
          color:"'red'",
          lineOffset:0



        },

          scaleLimit:{
          lineWidth:'pos/8', 
          lineSize:6,
          color:"'orange'",
          needleStart:0,
          needleEnd:-6,
          pointPos:9,
          lineOffset:0


        }
        
      },
      {  ///// TEMP ////
        radius:28,//radio del medidor
        angle:360,// angulo total del medidor
        start:270,// angulo de inicio del medidor
        divs:50,// divisiones
        value:500,// valor inicial
        limit:0,// valor del limite (escala secundaria)
        min:0,// valor mínimo del medidor
        max:500,// valor máximo (fondo de escala) 
        color:"'rgb('+(pos*4)+','+(255-(pos*2))+','+(255-(pos*4))+')'",// color del medidor(eval);
        alertColor:"'red'",// color del medidor(eval);
        limitColor:"'yellow'",// color del medidor(eval);
        units:"'A'",// leyenda abajo del valor (eval)
        lineWidth:6,// ancho del segmento
        lineSize:4,// largo del segmento
        lineOffset:0,
        needleStart:0,
        needleEnd:-4,
        pointPos: -3,
        pointColor:"'magenta'",
        refresh:100,
        scale:{
          lineWidth:1,
          lineSize:1,
          color:"'white'",
          lineOffset:1,

        },

          scaleLimit:{
          lineWidth:3,
          lineSize:3,
          color:"'orange'",
          needleStart:-3,
          needleEnd:2,
          pointPos:5,
          lineOffset:0


        }
        
      },      
  
  
  ]
;
var step=1;
var sang;
var cang;
var m=4;
var cnt=0;
var active=0;
var pos=0;
var valuePrint=0;
/*var limiteq=0;
 var pointq= 0;
  var valtextq =0;
  var lbltextq=0;
  var gr=0;*/
 // var valtextq =0;
function drawG(value1, active, limite, point, valtext, lbltext, grq)
{
  

  var limiteq=limite;
  var pointq= point;
  var valtextq =valtext;
  var lbltextq=lbltext;
  var gr=0;
  var g = gauge[active];
  var value= eval(g.value);
  var valuePrint=value;
  console.log('my',value);
  var gr = grq;
  var scaleLimit = (g.scaleLimit) ? g.scaleLimit:g;                 
  var scaleOver = (g.scaleOver) ? g.scaleOver:g;                 
  var scale = (g.scale) ? g.scale:g;  
  
  

  if(g.angle<=0)g.angle=180;
  value = value/(g.max/g.divs);
  var limit=0;
  if(g.limit>0)limit= Math.floor(g.limit / (g.max/g.divs));
  var i; 
  step=g.angle/g.divs;
  document.getElementById(gr).innerHTML="init";
  pos=0;
  var degree = (g.start)+90+(step*cnt);
  var limitdegree = (g.start)+90+(step*limit);
         i= g.start;
         while (i<=(g.angle+g.start)) {
           ang= i * Math.PI / 180;
           sang=Math.cos(ang);
           cang=Math.sin(ang);
           sx=sang*(g.radius+g.lineSize)*m;
           sy=cang*(g.radius+g.lineSize)*m; 
           ex=sang*g.radius*m;
           ey=cang*g.radius*m;
           
           if(pos<cnt){// medidor
             
             
         
              if(limit>0 && pos>limit){
                
                  sx=sang*(g.radius+scaleOver.lineSize+scaleOver.lineOffset)*m;
                  sy=cang*(g.radius+scaleOver.lineSize+scaleOver.lineOffset)*m; 
                  ex=sang*(g.radius+scaleOver.lineOffset)*m;
                  ey=cang*(g.radius+scaleOver.lineOffset)*m;

                 
               addPath(gr,sx,sy,ex,ey,scaleOver);
             }else{
                addPath(gr,sx,sy,ex,ey,g);
            }


           }else
           if(pos>cnt)// limite (orange) o escala (white)
             {       
               
               
               
                      if(limit>0 && pos<limit) {//limite
                        
           sx=sang*(g.radius+scaleLimit.lineOffset+scaleLimit.lineSize)*m;
           sy=cang*(g.radius+scaleLimit.lineOffset+scaleLimit.lineSize)*m; 
           ex=sang*(g.radius+scaleLimit.lineOffset)*m;
           ey=cang*(g.radius+scaleLimit.lineOffset)*m;    
              addPath(gr,sx,sy,ex,ey,scaleLimit);
                             
                

                      }
                      else
                      if(limit==0 || pos>limit){//escala o escalaover
                           
                        sx=sang*(g.radius+scale.lineSize+scale.lineOffset)*m;
                        sy=cang*(g.radius+scale.lineSize+scale.lineOffset)*m; 
                        ex=sang*(g.radius+scale.lineOffset)*m;
                        ey=cang*(g.radius+scale.lineOffset)*m;         
                        addPath(gr,sx,sy,ex,ey,scale);




                      }
             
               
               else{// scaleLmit needle
                 
                 if(limit>0)
                   {
                 lsx=sang*(g.radius+scaleLimit.lineSize+scaleLimit.needleStart)*m;
                 lsy=cang*(g.radius+scaleLimit.lineSize+scaleLimit.needleStart)*m;
                 lex=sang*(g.radius+scaleLimit.lineSize+scaleLimit.needleEnd)*m;
                 ley=cang*(g.radius+scaleLimit.lineSize+scaleLimit.needleEnd)*m;
            
                   }

 

               }

             }
           else
             { //needle 
               
                sx=sang*(g.radius+g.lineSize+g.needleStart)*m;
                 sy=cang*(g.radius+g.lineSize+g.needleStart)*m;
                 ex=sang*(g.radius+g.lineSize+g.needleEnd)*m;
                 ey=cang*(g.radius+g.lineSize+g.needleEnd)*m;
                    addPath(gr,sx,sy,ex,ey,g);

             }
           
   
i+=step;
  pos++;
    
     
    }
   
 if(limit>0)
   {
addPath(gr,lsx,lsy,lex,ley,scaleLimit);
       limiteq.style.display= "inherit";



limiteq.style.transform  = `rotate(${limitdegree}deg) translateY(-${(g.radius+scaleLimit.pointPos)*m}px) rotate(-${limitdegree}deg) `;

   }else
     {
       limiteq.style.display= "none";
     }
 pointq.style.transform  = `rotate(${degree}deg) translateY(-${(g.radius+g.pointPos)*m}px) rotate(-${degree}deg) `;

 

  
  if(limit>0 && cnt>limit){
    valtextq.style.fill=eval(g.alertColor);
  }else if(limit>0 && cnt==limit){
    valtextq.style.fill=eval(g.limitColor);
  }else
    {
      valtextq.style.fill=eval(g.color);
    }
  
 
  
  // ((value/(pos*cnt) *100)/10)
  lbltextq.textContent=eval(g.units);
//    lbltext.textContent=value;
  
    if(cnt<value){
        cnt++;
        if(cnt>value){
         setValueText(valuePrint);
        // console.log('valueInt-- ',cnt );
          return;
        }
      }else
     if(cnt>value){
        cnt--;
        if(cnt<value){
        setValueText(valuePrint);
       //console.log('valueInt-- ',value );
          return;
        }
      }
    else {
          setValueText(valuePrint);
    //    console.log('valueInt-- ',value );
      return;
    }



  //setValueText(cnt+Math.random());
  var rfrsh = 10;
  if(g.refresh)rfrsh=g.refresh;
      setTimeout(function(){
      
        drawG(value, active, limite, point, valtext, lbltext, grq);
      console.log('valueInt55-- ',g.refresh );
      },rfrsh);
    //  drawG(value, active, limite, point, valtext, lbltext, grq);
      
  
 function setValueText(v)
{
  var valueInt =  Math.trunc(v);
 
 // var valueDec = Math.trunc((v - valueInt)*10);
  valtext.innerHTML= valueInt ;

}

}

function setGauge() {
  var limiteAr = ['limite', 'limite2', 'limite3','limite4', 'limite5', 'limite6','limite7'];
  var pointAr = ['point', 'point2', 'point3','point4', 'point5', 'point6','point7'];
  var valtextAr = ['valtext', 'valtext2', 'valtext3','valtext4', 'valtext5', 'valtext6','valtext7'];
  var lbltextAr = ['lbltext', 'lbltext2', 'lbltext3','lbltext4', 'lbltext5', 'lbltext6','lbltext7'];
  var gAr = ['g1', 'g1-2', 'g1-3','g1-4', 'g1-5', 'g1-6', 'g1-7'];
  var valueAr=[200,230,450,100,345,400,450];

  for (var i = 0; i < 7; i++) {
    if (i < 3)
    { var active = 0;}
    else{ var active = 1;}
  //  var active = 0;
    gauge[active].value=valueAr[i];
    gauge[active].value = 300 + Math.random() * 200;

    var limite = document.getElementById(limiteAr[i]);
    var point = document.getElementById(pointAr[i]);
    var valtext = document.getElementById(valtextAr[i]);
    var lbltext = document.getElementById(lbltextAr[i]);
    var grq = gAr[i];
    var valuepass=valueAr[i];

    drawG(valuepass, active, limite, point, valtext, lbltext, grq);
  }
}


/*function setGauge() {
  var limiteAr = ['limite', 'limite2', 'limite3', 'limite4', 'limite5', 'limite6'];
  var pointAr = ['point', 'point2', 'point3', 'point4', 'point5', 'point6'];
  var valtextAr = ['valtext', 'valtext2', 'valtext3', 'valtext4', 'valtext5', 'valtext6'];
  var lbltextAr = ['lbltext', 'lbltext2', 'lbltext3', 'lbltext4', 'lbltext5', 'lbltext6'];
  var gAr = ['g1', 'g1-2', 'g1-3', 'g1-4', 'g1-5', 'g1-6'];
  var valueAr = [300, 233, 450, 500, 345, 400];

  let index = 0; // Start with the first gauge

  // Function to draw each gauge one by one
  function drawNextGauge() {
    if (index >= 6) return; // Stop when all gauges are drawn

    // Determine which gauge object to use based on index
    var active = index < 3 ? 0 : 1;

    // Get the elements and values for the current gauge
    var limite = document.getElementById(limiteAr[index]);
    var point = document.getElementById(pointAr[index]);
    var valtext = document.getElementById(valtextAr[index]);
    var lbltext = document.getElementById(lbltextAr[index]);
    var grq = gAr[index];
    var valuepass = valueAr[index];

    // Draw the current gauge and increment index
    drawG(valuepass, active, limite, point, valtext, lbltext, grq);

    // Increment the index and schedule the next gauge draw after the current one completes
    index++;
    setTimeout(drawNextGauge, 10); // Adjust timeout to ensure previous draw is complete
  }

  drawNextGauge(); // Start drawing gauges
}

//setGauge();*/

setGauge();





  </script>
</body>
 
</html>